<div class="container mt-5">
  <div class="row">
    <div class="col-md-8 mx-auto">
      <h2>Recipe Scraper</h2>
      
      <!-- URL Input Form -->
      <form (ngSubmit)="scrapeRecipe()" *ngIf="!scrapedRecipe">
        <div class="mb-3">
          <label for="recipeUrl" class="form-label">Recipe URL</label>
          <input
            type="url"
            class="form-control"
            id="recipeUrl"
            [(ngModel)]="recipeUrl"
            name="recipeUrl"
            placeholder="Enter the URL of a recipe"
            required
          />
        </div>
        <button type="submit" class="btn btn-primary" [disabled]="loading">
          {{ loading ? 'Scraping...' : 'Scrape Recipe' }}
        </button>
      </form>

      <!-- Error Message -->
      <div *ngIf="error" class="alert alert-danger mt-3">
        {{ error }}
      </div>

      <!-- Loading Spinner -->
      <div *ngIf="loading" class="mt-3">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <!-- Scraped Recipe Display -->
      <div *ngIf="scrapedRecipe" class="recipe-preview mt-4 p-4 border rounded">
        <h3>{{ scrapedRecipe.title }}</h3>
        
        <div *ngIf="scrapedRecipe.image" class="mb-3">
          <img [src]="scrapedRecipe.image" alt="{{ scrapedRecipe.title }}" class="img-fluid rounded" style="max-height: 300px; object-fit: cover;">
        </div>

        <div class="row">
          <div class="col-md-6">
            <h5>Ingredients (<span class="badge bg-info">{{ scrapedRecipe.ingredients.length }}</span>)</h5>
            <ul class="list-unstyled">
              <li *ngFor="let ingredient of scrapedRecipe.ingredients.slice(0, 5)">
                âœ“ {{ ingredient }}
              </li>
              <li *ngIf="scrapedRecipe.ingredients.length > 5" class="text-muted">
                ... and {{ scrapedRecipe.ingredients.length - 5 }} more
              </li>
            </ul>
          </div>
          <div class="col-md-6">
            <h5>Instructions (<span class="badge bg-info">{{ scrapedRecipe.instructions.length }}</span>)</h5>
            <ol class="small">
              <li *ngFor="let instruction of scrapedRecipe.instructions.slice(0, 3)">
                {{ instruction.substring(0, 50) }}...
              </li>
              <li *ngIf="scrapedRecipe.instructions.length > 3" class="text-muted">
                ... and {{ scrapedRecipe.instructions.length - 3 }} more steps
              </li>
            </ol>
          </div>
        </div>

        <div class="mt-4">
          <button 
            (click)="saveRecipe()" 
            class="btn btn-success" 
            [disabled]="saving"
          >
            {{ saving ? 'Saving...' : 'ðŸ’¾ Save to Vault' }}
          </button>
          <button 
            (click)="scrapedRecipe = null" 
            class="btn btn-secondary ms-2"
          >
            Cancel
          </button>
          <a [href]="scrapedRecipe.url" target="_blank" class="btn btn-outline-secondary ms-2">
            View Original â†’
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
